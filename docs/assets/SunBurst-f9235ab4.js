import{_ as V}from"./LoadingTip.vue_vue_type_script_setup_true_lang-1ea9d305.js";import{o as M}from"./accessors-409bcfe1.js";import{N as Z,c as F,h as G}from"./dice-70a649c2.js";import{l as J,i as K,a as O,d as Q}from"./linear-13e24e24.js";import{a as U,i as W}from"./init-6640a802.js";import{p as X,d as Y}from"./arc-99452674.js";import{c as tt}from"./create-f9d26a3e.js";import{i as nt}from"./rainbow-a2597541.js";import{a as et}from"./index-c73def89.js";import{d as rt,r as B,o as at,n as ot,c as it,b as lt,u as N,e as ut,f as st,_ as ct}from"./index-d0139ac4.js";import"./path-53f90ab3.js";var ft={depth:-1},z={},S={};function dt(t){return t.id}function pt(t){return t.parentId}function C(){var t=dt,a=pt,o;function l(u){var s=Array.from(u),m=t,d=a,c,r,f,n,h,i,p,I,b=new Map;if(o!=null){const g=s.map((y,_)=>mt(o(y,_,u))),k=g.map(D),A=new Set(g).add("");for(const y of k)A.has(y)||(A.add(y),g.push(y),k.push(D(y)),s.push(S));m=(y,_)=>g[_],d=(y,_)=>k[_]}for(f=0,c=s.length;f<c;++f)r=s[f],i=s[f]=new Z(r),(p=m(r,f,u))!=null&&(p+="")&&(I=i.id=p,b.set(I,b.has(I)?z:i)),(p=d(r,f,u))!=null&&(p+="")&&(i.parent=p);for(f=0;f<c;++f)if(i=s[f],p=i.parent){if(h=b.get(p),!h)throw new Error("missing: "+p);if(h===z)throw new Error("ambiguous: "+p);h.children?h.children.push(i):h.children=[i],i.parent=h}else{if(n)throw new Error("multiple roots");n=i}if(!n)throw new Error("no root");if(o!=null){for(;n.data===S&&n.children.length===1;)n=n.children[0],--c;for(let g=s.length-1;g>=0&&(i=s[g],i.data===S);--g)i.data=null}if(n.parent=ft,n.eachBefore(function(g){g.depth=g.parent.depth+1,--c}).eachBefore(F),n.parent=null,c>0)throw new Error("cycle");return n}return l.id=function(u){return arguments.length?(t=M(u),l):t},l.parentId=function(u){return arguments.length?(a=M(u),l):a},l.path=function(u){return arguments.length?(o=M(u),l):o},l}function mt(t){t=`${t}`;let a=t.length;return $(t,a-1)&&!$(t,a-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function D(t){let a=t.length;if(a<2)return"";for(;--a>1&&!$(t,a););return t.slice(0,a)}function $(t,a){if(t[a]==="/"){let o=0;for(;a>0&&t[--a]==="\\";)++o;if(!(o&1))return!0}return!1}function ht(){var t=0,a=1,o,l,u,s,m=K,d=!1,c;function r(n){return n==null||isNaN(n=+n)?c:m(u===0?.5:(n=(s(n)-o)*u,d?Math.max(0,Math.min(1,n)):n))}r.domain=function(n){return arguments.length?([t,a]=n,o=s(t=+t),l=s(a=+a),u=o===l?0:1/(l-o),r):[t,a]},r.clamp=function(n){return arguments.length?(d=!!n,r):d},r.interpolator=function(n){return arguments.length?(m=n,r):m};function f(n){return function(h){var i,p;return arguments.length?([i,p]=h,m=n(i,p),r):[m(0),m(1)]}}return r.range=f(W),r.rangeRound=f(O),r.unknown=function(n){return arguments.length?(c=n,r):c},function(n){return s=n,o=n(t),l=n(a),u=o===l?0:1/(l-o),r}}function gt(t,a){return a.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function q(){var t=J(ht()(K));return t.copy=function(){return gt(t,q())},U.apply(t,arguments)}function yt(t,{path:a,id:o=Array.isArray(t)?w=>w.id:null,parentId:l=Array.isArray(t)?w=>w.parentId:null,children:u,value:s,sort:m=(w,v)=>Q(w.value,v.value),label:d,title:c,link:r,linkTarget:f="_blank",width:n=640,height:h=400,margin:i=1,marginTop:p=i,marginRight:I=i,marginBottom:b=i,marginLeft:g=i,padding:k=1,radius:A=Math.min(n-g-I,h-p-b)/2,color:y=nt,fill:_="#ccc",fillOpacity:H=.6}={}){var P,j;let w=a?C().path(a)(t):o&&l?C().id(o).parentId(l)(t):G(t,u),v=w;s?v.sum(e=>Math.max(0,s(e))):w.count(),m&&v.sort(m),X().size([2*Math.PI,A])(v),y&&(y=q([0,(((P=v.children)==null?void 0:P.length)??0)-1],y).unknown(_),(j=v.children)==null||j.forEach((e,x)=>e.index=x));const L=Y().startAngle(e=>e.x0).endAngle(e=>e.x1).padAngle(e=>Math.min((e.x1-e.x0)/2,2*k/A)).padRadius(A/2).innerRadius(e=>e.y0).outerRadius(e=>e.y1-k),R=tt("svg").attr("viewBox",[I-g-n/2,b-p-h/2,n,h]).attr("width",n).attr("height",h).attr("style","max-width: 100%; height: auto; height: intrinsic;").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","middle"),E=R.selectAll("a").data(v.descendants()).join("a").attr("xlink:href",r==null?null:e=>r(e.data,e)).attr("target",r==null?null:f);return E.append("path").attr("d",L).attr("fill",y?e=>{var x;return y(((x=e.ancestors().reverse()[1])==null?void 0:x.index)??0)}:_).attr("fill-opacity",H),d!=null&&E.filter(e=>(e.y0+e.y1)/2*(e.x1-e.x0)>10).append("text").attr("transform",e=>{if(!e.depth)return"";const x=(e.x0+e.x1)/2*180/Math.PI,T=(e.y0+e.y1)/2;return`rotate(${x-90}) translate(${T},0) rotate(${x<180?0:180})`}).attr("dy","0.32em").text(e=>d(e.data,e)),c!=null&&E.append("title").text(e=>c(e.data,e)),R.node()}const _t=rt({__name:"SunBurst",setup(t){function a(d){return"children"in d}let o=B(),l=B(!0),u=B(!1),s=B(),m=async()=>{let d=await new Promise(async(c,r)=>{c((await et.get("/d3json/ZoomableSunburst.json")).data)}).catch(c=>{console.log(c),u.value=!0});l.value=!1,d&&(s.value=d)};return at(async()=>{if(await ot(),await m(),!s.value)return;let d=s.value,c=yt(d,{value:r=>a(r)?0:r.value,label:r=>r.name,title:(r,f)=>`${f.ancestors().reverse().map(n=>n.data.name).join(".")}
${a(r)?"":r.value.toLocaleString("en")}`,width:1152,height:1152});o.value.appendChild(c)}),(d,c)=>{const r=V;return ut(),it(r,{loading:N(l),loadError:N(u)},{default:lt(()=>[st("div",{ref_key:"chart",ref:o,class:"chart_box"},null,512)]),_:1},8,["loading","loadError"])}}});const $t=ct(_t,[["__scopeId","data-v-69381be3"]]);export{$t as default};
