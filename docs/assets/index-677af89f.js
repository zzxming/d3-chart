var v="$";function D(){}D.prototype=q.prototype={constructor:D,has:function(t){return v+t in this},get:function(t){return this[v+t]},set:function(t,n){return this[v+t]=n,this},remove:function(t){var n=v+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===v&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===v&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===v&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===v&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===v&&++t;return t},empty:function(){for(var t in this)if(t[0]===v)return!1;return!0},each:function(t){for(var n in this)n[0]===v&&t(this[n],n.slice(1),this)}};function q(t,n){var e=new D;if(t instanceof D)t.each(function(l,o){e.set(o,l)});else if(Array.isArray(t)){var i=-1,r=t.length,u;if(n==null)for(;++i<r;)e.set(i,t[i]);else for(;++i<r;)e.set(n(u=t[i],i,t),u)}else if(t)for(var s in t)e.set(s,t[s]);return e}function U(){}var b=q.prototype;U.prototype={constructor:U,has:b.has,add:function(t){return t+="",this[v+t]=t,this},remove:b.remove,clear:b.clear,values:b.keys,size:b.size,empty:b.empty,each:b.each};var O="http://www.w3.org/1999/xhtml";const G={svg:"http://www.w3.org/2000/svg",xhtml:O,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function X(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),G.hasOwnProperty(n)?{space:G[n],local:t}:t}function lt(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===O&&n.documentElement.namespaceURI===O?n.createElement(t):n.createElementNS(e,t)}}function ct(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function J(t){var n=X(t);return(n.local?ct:lt)(n)}function ft(){}function Q(t){return t==null?ft:function(){return this.querySelector(t)}}function at(t){typeof t!="function"&&(t=Q(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var u=n[r],s=u.length,l=i[r]=new Array(s),o,f,a=0;a<s;++a)(o=u[a])&&(f=t.call(o,o.__data__,a,u))&&("__data__"in o&&(f.__data__=o.__data__),l[a]=f);return new m(i,this._parents)}function ht(){return[]}function pt(t){return t==null?ht:function(){return this.querySelectorAll(t)}}function yt(t){typeof t!="function"&&(t=pt(t));for(var n=this._groups,e=n.length,i=[],r=[],u=0;u<e;++u)for(var s=n[u],l=s.length,o,f=0;f<l;++f)(o=s[f])&&(i.push(t.call(o,o.__data__,f,s)),r.push(o));return new m(i,r)}function _t(t){return function(){return this.matches(t)}}function dt(t){typeof t!="function"&&(t=_t(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var u=n[r],s=u.length,l=i[r]=[],o,f=0;f<s;++f)(o=u[f])&&t.call(o,o.__data__,f,u)&&l.push(o);return new m(i,this._parents)}function Y(t){return new Array(t.length)}function mt(){return new m(this._enter||this._groups.map(Y),this._parents)}function F(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}F.prototype={constructor:F,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function vt(t){return function(){return t}}var K="$";function gt(t,n,e,i,r,u){for(var s=0,l,o=n.length,f=u.length;s<f;++s)(l=n[s])?(l.__data__=u[s],i[s]=l):e[s]=new F(t,u[s]);for(;s<o;++s)(l=n[s])&&(r[s]=l)}function wt(t,n,e,i,r,u,s){var l,o,f={},a=n.length,_=u.length,d=new Array(a),h;for(l=0;l<a;++l)(o=n[l])&&(d[l]=h=K+s.call(o,o.__data__,l,n),h in f?r[l]=o:f[h]=o);for(l=0;l<_;++l)h=K+s.call(t,u[l],l,u),(o=f[h])?(i[l]=o,o.__data__=u[l],f[h]=null):e[l]=new F(t,u[l]);for(l=0;l<a;++l)(o=n[l])&&f[d[l]]===o&&(r[l]=o)}function xt(t,n){if(!t)return h=new Array(this.size()),f=-1,this.each(function(R){h[++f]=R}),h;var e=n?wt:gt,i=this._parents,r=this._groups;typeof t!="function"&&(t=vt(t));for(var u=r.length,s=new Array(u),l=new Array(u),o=new Array(u),f=0;f<u;++f){var a=i[f],_=r[f],d=_.length,h=t.call(a,a&&a.__data__,f,i),C=h.length,L=l[f]=new Array(C),B=s[f]=new Array(C),H=o[f]=new Array(d);e(a,_,L,B,H,h,n);for(var S=0,T=0,V,P;S<C;++S)if(V=L[S]){for(S>=T&&(T=S+1);!(P=B[T])&&++T<C;);V._next=P||null}}return s=new m(s,i),s._enter=l,s._exit=o,s}function At(){return new m(this._exit||this._groups.map(Y),this._parents)}function St(t,n,e){var i=this.enter(),r=this,u=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),n!=null&&(r=n(r)),e==null?u.remove():e(u),i&&r?i.merge(r).order():r}function Nt(t){for(var n=this._groups,e=t._groups,i=n.length,r=e.length,u=Math.min(i,r),s=new Array(i),l=0;l<u;++l)for(var o=n[l],f=e[l],a=o.length,_=s[l]=new Array(a),d,h=0;h<a;++h)(d=o[h]||f[h])&&(_[h]=d);for(;l<i;++l)s[l]=n[l];return new m(s,this._parents)}function Et(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i=t[n],r=i.length-1,u=i[r],s;--r>=0;)(s=i[r])&&(u&&s.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(s,u),u=s);return this}function bt(t){t||(t=Ct);function n(_,d){return _&&d?t(_.__data__,d.__data__):!_-!d}for(var e=this._groups,i=e.length,r=new Array(i),u=0;u<i;++u){for(var s=e[u],l=s.length,o=r[u]=new Array(l),f,a=0;a<l;++a)(f=s[a])&&(o[a]=f);o.sort(n)}return new m(r,this._parents).order()}function Ct(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Tt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Lt(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t}function Bt(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,u=i.length;r<u;++r){var s=i[r];if(s)return s}return null}function Vt(){var t=0;return this.each(function(){++t}),t}function Pt(){return!this.node()}function Rt(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r=n[e],u=0,s=r.length,l;u<s;++u)(l=r[u])&&t.call(l,l.__data__,u,r);return this}function zt(t){return function(){this.removeAttribute(t)}}function Dt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ft(t,n){return function(){this.setAttribute(t,n)}}function Ht(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Mt(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function kt(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Ot(t,n){var e=X(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((n==null?e.local?Dt:zt:typeof n=="function"?e.local?kt:Mt:e.local?Ht:Ft)(e,n))}function Z(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wt(t){return function(){this.style.removeProperty(t)}}function qt(t,n,e){return function(){this.style.setProperty(t,n,e)}}function It(t,n,e){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function Ut(t,n,e){return arguments.length>1?this.each((n==null?Wt:typeof n=="function"?It:qt)(t,n,e??"")):Gt(this.node(),t)}function Gt(t,n){return t.style.getPropertyValue(n)||Z(t).getComputedStyle(t,null).getPropertyValue(n)}function Kt(t){return function(){delete this[t]}}function $t(t,n){return function(){this[t]=n}}function Xt(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Jt(t,n){return arguments.length>1?this.each((n==null?Kt:typeof n=="function"?Xt:$t)(t,n)):this.node()[t]}function j(t){return t.trim().split(/^|\s+/)}function I(t){return t.classList||new tt(t)}function tt(t){this._node=t,this._names=j(t.getAttribute("class")||"")}tt.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function nt(t,n){for(var e=I(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function et(t,n){for(var e=I(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function Qt(t){return function(){nt(this,t)}}function Yt(t){return function(){et(this,t)}}function Zt(t,n){return function(){(n.apply(this,arguments)?nt:et)(this,t)}}function jt(t,n){var e=j(t+"");if(arguments.length<2){for(var i=I(this.node()),r=-1,u=e.length;++r<u;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof n=="function"?Zt:n?Qt:Yt)(e,n))}function tn(){this.textContent=""}function nn(t){return function(){this.textContent=t}}function en(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function rn(t){return arguments.length?this.each(t==null?tn:(typeof t=="function"?en:nn)(t)):this.node().textContent}function on(){this.innerHTML=""}function sn(t){return function(){this.innerHTML=t}}function un(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function ln(t){return arguments.length?this.each(t==null?on:(typeof t=="function"?un:sn)(t)):this.node().innerHTML}function cn(){this.nextSibling&&this.parentNode.appendChild(this)}function fn(){return this.each(cn)}function an(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hn(){return this.each(an)}function pn(t){var n=typeof t=="function"?t:J(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function yn(){return null}function _n(t,n){var e=typeof t=="function"?t:J(t),i=n==null?yn:typeof n=="function"?n:Q(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function dn(){var t=this.parentNode;t&&t.removeChild(this)}function mn(){return this.each(dn)}function vn(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function gn(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function wn(t){return this.select(t?gn:vn)}function xn(t){return arguments.length?this.property("__data__",t):this.node().__data__}var rt={};if(typeof document<"u"){var An=document.documentElement;"onmouseenter"in An||(rt={mouseenter:"mouseover",mouseleave:"mouseout"})}function Sn(t,n,e){return t=it(t,n,e),function(i){var r=i.relatedTarget;(!r||r!==this&&!(r.compareDocumentPosition(this)&8))&&t.call(this,i)}}function it(t,n,e){return function(i){try{t.call(this,this.__data__,n,e)}finally{}}}function Nn(t){return t.trim().split(/^|\s+/).map(function(n){var e="",i=n.indexOf(".");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{type:n,name:e}})}function En(t){return function(){var n=this.__on;if(n){for(var e=0,i=-1,r=n.length,u;e<r;++e)u=n[e],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.capture):n[++i]=u;++i?n.length=i:delete this.__on}}}function bn(t,n,e){var i=rt.hasOwnProperty(t.type)?Sn:it;return function(r,u,s){var l=this.__on,o,f=i(n,u,s);if(l){for(var a=0,_=l.length;a<_;++a)if((o=l[a]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=f,o.capture=e),o.value=n;return}}this.addEventListener(t.type,f,e),o={type:t.type,name:t.name,value:n,listener:f,capture:e},l?l.push(o):this.__on=[o]}}function Cn(t,n,e){var i=Nn(t+""),r,u=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var o=0,f=l.length,a;o<f;++o)for(r=0,a=l[o];r<u;++r)if((s=i[r]).type===a.type&&s.name===a.name)return a.value}return}for(l=n?bn:En,e==null&&(e=!1),r=0;r<u;++r)this.each(l(i[r],n,e));return this}function ot(t,n,e){var i=Z(t),r=i.CustomEvent;typeof r=="function"?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function Tn(t,n){return function(){return ot(this,t,n)}}function Ln(t,n){return function(){return ot(this,t,n.apply(this,arguments))}}function Bn(t,n){return this.each((typeof n=="function"?Ln:Tn)(t,n))}var st=[null];function m(t,n){this._groups=t,this._parents=n}function W(){return new m([[document.documentElement]],st)}m.prototype=W.prototype={constructor:m,select:at,selectAll:yt,filter:dt,data:xt,enter:mt,exit:At,join:St,merge:Nt,order:Et,sort:bt,call:Tt,nodes:Lt,node:Bt,size:Vt,empty:Pt,each:Rt,attr:Ot,style:Ut,property:Jt,classed:jt,text:rn,html:ln,raise:fn,lower:hn,append:pn,insert:_n,remove:mn,clone:wn,datum:xn,on:Cn,dispatch:Bn};function $(t){return typeof t=="string"?new m([[document.querySelector(t)]],[document.documentElement]):new m([[t]],st)}function Vn(){var t=f,n=a,e=_,i=document.body,r=R(),u=null,s=null,l=null;function o(c){u=ut(c),u&&(s=u.createSVGPoint(),i.appendChild(r))}o.show=function(){var c=Array.prototype.slice.call(arguments);c[c.length-1]instanceof SVGElement&&(l=c.pop());var y=e.apply(this,c),p=n.apply(this,c),g=t.apply(this,c),x=N(),E=h.length,A,M=document.documentElement.scrollTop||i.scrollTop,k=document.documentElement.scrollLeft||i.scrollLeft;for(x.html(y).style("opacity",1).style("pointer-events","all");E--;)x.classed(h[E],!1);return A=d.get(g).apply(this),x.classed(g,!0).style("top",A.top+p[0]+M+"px").style("left",A.left+p[1]+k+"px"),o},o.hide=function(){var c=N();return c.style("opacity",0).style("pointer-events","none"),o},o.attr=function(c,y){if(arguments.length<2&&typeof c=="string")return N().attr(c);var p=Array.prototype.slice.call(arguments);return W.prototype.attr.apply(N(),p),o},o.style=function(c,y){if(arguments.length<2&&typeof c=="string")return N().style(c);var p=Array.prototype.slice.call(arguments);return W.prototype.style.apply(N(),p),o},o.direction=function(c){return arguments.length?(t=c==null?c:z(c),o):t},o.offset=function(c){return arguments.length?(n=c==null?c:z(c),o):n},o.html=function(c){return arguments.length?(e=c==null?c:z(c),o):e},o.rootElement=function(c){return arguments.length?(i=c==null?c:z(c),o):i},o.destroy=function(){return r&&(N().remove(),r=null),o};function f(){return"n"}function a(){return[0,0]}function _(){return" "}var d=q({n:C,s:L,e:B,w:H,nw:S,ne:T,sw:V,se:P}),h=d.keys();function C(){var c=w(this);return{top:c.n.y-r.offsetHeight,left:c.n.x-r.offsetWidth/2}}function L(){var c=w(this);return{top:c.s.y,left:c.s.x-r.offsetWidth/2}}function B(){var c=w(this);return{top:c.e.y-r.offsetHeight/2,left:c.e.x}}function H(){var c=w(this);return{top:c.w.y-r.offsetHeight/2,left:c.w.x-r.offsetWidth}}function S(){var c=w(this);return{top:c.nw.y-r.offsetHeight,left:c.nw.x-r.offsetWidth}}function T(){var c=w(this);return{top:c.ne.y-r.offsetHeight,left:c.ne.x}}function V(){var c=w(this);return{top:c.sw.y,left:c.sw.x-r.offsetWidth}}function P(){var c=w(this);return{top:c.se.y,left:c.se.x}}function R(){var c=$(document.createElement("div"));return c.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),c.node()}function ut(c){var y=c.node();return y?y.tagName.toLowerCase()==="svg"?y:y.ownerSVGElement:null}function N(){return r==null&&(r=R(),i.appendChild(r)),$(r)}function w(c){for(var y=l||c;y.getScreenCTM==null&&y.parentNode!=null;)y=y.parentNode;var p={},g=y.getScreenCTM(),x=y.getBBox(),E=x.width,A=x.height,M=x.x,k=x.y;return s.x=M,s.y=k,p.nw=s.matrixTransform(g),s.x+=E,p.ne=s.matrixTransform(g),s.y+=A,p.se=s.matrixTransform(g),s.x-=E,p.sw=s.matrixTransform(g),s.y-=A/2,p.w=s.matrixTransform(g),s.x+=E,p.e=s.matrixTransform(g),s.x-=E/2,s.y-=A/2,p.n=s.matrixTransform(g),s.y+=A,p.s=s.matrixTransform(g),p}function z(c){return typeof c=="function"?c:function(){return c}}return o}export{Vn as d};
