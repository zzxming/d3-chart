import{s as $,_ as D}from"./LoadingTip.vue_vue_type_script_setup_true_lang-23052702.js";import{s as H,a as I,d as L}from"./stack-01ef94d2.js";import{r as O}from"./range-6bc2a9a0.js";import{m as y}from"./min-7292b72b.js";import{c as V}from"./rainbow-3256e196.js";import{d as W,r as g,o as q,n as F,c as G,w as J,u as b,b as K,e as P,f as Q}from"./index-49308dbd.js";import{b as M}from"./linear-30d2ba65.js";import{m as T}from"./max-adfc8a60.js";import"./path-53f90ab3.js";import"./init-fd8c634d.js";function R(i){if(!(o=i.length))return[];for(var l=-1,d=y(i,U),p=new Array(d);++l<d;)for(var n=-1,o,c=p[l]=new Array(o);++n<o;)c[n]=i[n][l];return p}function U(i){return i.length}const X=W({__name:"StreamgraphTransitions",setup(i){const l=g();let d=g(!0),p=g(!1);return q(async()=>{d.value=!1,await F();const{innerWidth:n,innerHeight:o}=window;let c=20,w=200,A=10;const _=$(l.value).append("svg");_.attr("viewBox",[0,0,n,o]);let B=H().keys(O(c)).order(I);function x(){let t=R(Array.from({length:c},()=>S()(w,A))),a=B([...t]);return h.domain([y(a,r=>y(r,s=>s[0]))??0,T(a,r=>T(r,s=>s[1]))??0]),a}let z=M([0,w-1],[0,n]),h=M([0,1],[o,0]),E=V,S=function(){function t(a,r){const s=1/(.1+Math.random()),m=2*Math.random()-.5,e=10/(.1+Math.random());for(let u=0;u<r;++u){const k=(u/r-m)*e;a[u]+=Math.round(s*Math.exp(-k*k))}}return function(r,s){const m=[];for(let e=0;e<r;++e)m[e]=0;for(let e=0;e<s;++e)t(m,r);return m}},f=L();f.x((t,a)=>z(a)),f.y0(t=>h(t[0])),f.y1(t=>h(t[1]));const C=_.selectAll("path").data(x).join("path").attr("d",t=>f(t)).attr("fill",(t,a)=>E(Math.random()));let N=async function(){_.node(),await C.data(x).transition().delay(1e3).duration(1500).attr("d",t=>f(t)).end()},v=0;for(;v<10;)await N(),v+=1}),(n,o)=>{const c=D;return K(),G(c,{loading:b(d),loadError:b(p)},{default:J(()=>[P("div",{ref_key:"chart",ref:l,class:"chart_box"},null,512)]),_:1},8,["loading","loadError"])}}});const it=Q(X,[["__scopeId","data-v-1b5809ff"]]);export{it as default};
