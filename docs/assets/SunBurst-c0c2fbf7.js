import{d as H,r as b,o as O,n as F,c as G,w as J,u as D,_ as Q,b as U,e as W,f as X}from"./index-c6c14692.js";import{_ as Y}from"./LoadingTip.vue_vue_type_script_setup_true_lang-a64b8133.js";import{o as M}from"./accessors-409bcfe1.js";import{N as Z,c as tt,h as nt}from"./dice-70a649c2.js";import{l as et,i as K,a as rt,d as at}from"./linear-ad8fee29.js";import{a as ot,i as it}from"./init-b236822a.js";import{p as lt,d as ut}from"./arc-99452674.js";import{c as st}from"./create-0c717456.js";import{i as ct}from"./rainbow-d94ea702.js";import"./path-53f90ab3.js";var ft={depth:-1},j={},P={};function dt(t){return t.id}function pt(t){return t.parentId}function z(){var t=dt,a=pt,o;function l(u){var s=Array.from(u),m=t,d=a,c,r,f,n,h,i,p,I,k=new Map;if(o!=null){const _=s.map((g,y)=>mt(o(g,y,u))),E=_.map(C),A=new Set(_).add("");for(const g of E)A.has(g)||(A.add(g),_.push(g),E.push(C(g)),s.push(P));m=(g,y)=>_[y],d=(g,y)=>E[y]}for(f=0,c=s.length;f<c;++f)r=s[f],i=s[f]=new Z(r),(p=m(r,f,u))!=null&&(p+="")&&(I=i.id=p,k.set(I,k.has(I)?j:i)),(p=d(r,f,u))!=null&&(p+="")&&(i.parent=p);for(f=0;f<c;++f)if(i=s[f],p=i.parent){if(h=k.get(p),!h)throw new Error("missing: "+p);if(h===j)throw new Error("ambiguous: "+p);h.children?h.children.push(i):h.children=[i],i.parent=h}else{if(n)throw new Error("multiple roots");n=i}if(!n)throw new Error("no root");if(o!=null){for(;n.data===P&&n.children.length===1;)n=n.children[0],--c;for(let _=s.length-1;_>=0&&(i=s[_],i.data===P);--_)i.data=null}if(n.parent=ft,n.eachBefore(function(_){_.depth=_.parent.depth+1,--c}).eachBefore(tt),n.parent=null,c>0)throw new Error("cycle");return n}return l.id=function(u){return arguments.length?(t=M(u),l):t},l.parentId=function(u){return arguments.length?(a=M(u),l):a},l.path=function(u){return arguments.length?(o=M(u),l):o},l}function mt(t){t=`${t}`;let a=t.length;return R(t,a-1)&&!R(t,a-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function C(t){let a=t.length;if(a<2)return"";for(;--a>1&&!R(t,a););return t.slice(0,a)}function R(t,a){if(t[a]==="/"){let o=0;for(;a>0&&t[--a]==="\\";)++o;if(!(o&1))return!0}return!1}function ht(){var t=0,a=1,o,l,u,s,m=K,d=!1,c;function r(n){return n==null||isNaN(n=+n)?c:m(u===0?.5:(n=(s(n)-o)*u,d?Math.max(0,Math.min(1,n)):n))}r.domain=function(n){return arguments.length?([t,a]=n,o=s(t=+t),l=s(a=+a),u=o===l?0:1/(l-o),r):[t,a]},r.clamp=function(n){return arguments.length?(d=!!n,r):d},r.interpolator=function(n){return arguments.length?(m=n,r):m};function f(n){return function(h){var i,p;return arguments.length?([i,p]=h,m=n(i,p),r):[m(0),m(1)]}}return r.range=f(it),r.rangeRound=f(rt),r.unknown=function(n){return arguments.length?(c=n,r):c},function(n){return s=n,o=n(t),l=n(a),u=o===l?0:1/(l-o),r}}function _t(t,a){return a.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function L(){var t=et(ht()(K));return t.copy=function(){return _t(t,L())},ot.apply(t,arguments)}function gt(t,{path:a,id:o=Array.isArray(t)?w=>w.id:null,parentId:l=Array.isArray(t)?w=>w.parentId:null,children:u,value:s,sort:m=(w,v)=>at(w.value,v.value),label:d,title:c,link:r,linkTarget:f="_blank",width:n=640,height:h=400,margin:i=1,marginTop:p=i,marginRight:I=i,marginBottom:k=i,marginLeft:_=i,padding:E=1,radius:A=Math.min(n-_-I,h-p-k)/2,color:g=ct,fill:y="#ccc",fillOpacity:T=.6}={}){var $,N;let w=a?z().path(a)(t):o&&l?z().id(o).parentId(l)(t):nt(t,u),v=w;s?v.sum(e=>Math.max(0,s(e))):w.count(),m&&v.sort(m),lt().size([2*Math.PI,A])(v),g&&(g=L([0,((($=v.children)==null?void 0:$.length)??0)-1],g).unknown(y),(N=v.children)==null||N.forEach((e,x)=>e.index=x));const V=ut().startAngle(e=>e.x0).endAngle(e=>e.x1).padAngle(e=>Math.min((e.x1-e.x0)/2,2*E/A)).padRadius(A/2).innerRadius(e=>e.y0).outerRadius(e=>e.y1-E),S=st("svg").attr("viewBox",[I-_-n/2,k-p-h/2,n,h]).attr("width",n).attr("height",h).attr("style","max-width: 100%; height: auto; height: intrinsic;").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","middle"),B=S.selectAll("a").data(v.descendants()).join("a").attr("xlink:href",r==null?null:e=>r(e.data,e)).attr("target",r==null?null:f);return B.append("path").attr("d",V).attr("fill",g?e=>{var x;return g(((x=e.ancestors().reverse()[1])==null?void 0:x.index)??0)}:y).attr("fill-opacity",T),d!=null&&B.filter(e=>(e.y0+e.y1)/2*(e.x1-e.x0)>10).append("text").attr("transform",e=>{if(!e.depth)return"";const x=(e.x0+e.x1)/2*180/Math.PI,q=(e.y0+e.y1)/2;return`rotate(${x-90}) translate(${q},0) rotate(${x<180?0:180})`}).attr("dy","0.32em").text(e=>d(e.data,e)),c!=null&&B.append("title").text(e=>c(e.data,e)),S.node()}const yt=H({__name:"SunBurst",setup(t){function a(d){return"children"in d}let o=b(),l=b(!0),u=b(!1),s=b(),m=async()=>{let d=await new Promise(async(c,r)=>{c((await Q(()=>import("./ZoomableSunburst-9b542d7b.js"),[])).default)}).catch(c=>{console.log(c),u.value=!0});l.value=!1,d&&(s.value=d)};return O(async()=>{if(await F(),await m(),!s.value)return;let d=s.value,c=gt(d,{value:r=>a(r)?0:r.value,label:r=>r.name,title:(r,f)=>`${f.ancestors().reverse().map(n=>n.data.name).join(".")}
${a(r)?"":r.value.toLocaleString("en")}`,width:1152,height:1152});o.value.appendChild(c)}),(d,c)=>{const r=Y;return U(),G(r,{loading:D(l),loadError:D(u)},{default:J(()=>[W("div",{ref_key:"chart",ref:o,class:"chart_box"},null,512)]),_:1},8,["loading","loadError"])}}});const Pt=X(yt,[["__scopeId","data-v-aaa0a0f3"]]);export{Pt as default};
