import{d as it,r as D,o as st,n as dt,c as ct,w as ft,u as H,b as mt,e as ut,_ as G}from"./index-49308dbd.js";import{a as gt,s as pt,_ as ht}from"./LoadingTip.vue_vue_type_script_setup_true_lang-23052702.js";import{z as bt}from"./zoom-ebf456f1.js";import{d as X}from"./index-677af89f.js";import{m as P,s as xt}from"./Tableau10-36abeb1c.js";import{o as Y,I as W}from"./ordinal-3a198d01.js";import{r as Z}from"./range-6bc2a9a0.js";import{b as vt}from"./init-fd8c634d.js";import{m as q}from"./max-adfc8a60.js";import{a as J,b as K}from"./axis-a25b44c4.js";import{c as wt}from"./create-cf9aa3fe.js";import{b as Q}from"./linear-30d2ba65.js";import{c as yt}from"./colors-98f238a0.js";function E(){var n=Y().unknown(void 0),u=n.domain,_=n.range,l=0,s=1,g,b,f=!1,m=0,p=0,e=.5;delete n.unknown;function a(){var t=u().length,h=s<l,r=h?s:l,x=h?l:s;g=(x-r)/Math.max(1,t-m+p*2),f&&(g=Math.floor(g)),r+=(x-r-g*(t-m))*e,b=g*(1-m),f&&(r=Math.round(r),b=Math.round(b));var d=Z(t).map(function(v){return r+g*v});return _(h?d.reverse():d)}return n.domain=function(t){return arguments.length?(u(t),a()):u()},n.range=function(t){return arguments.length?([l,s]=t,l=+l,s=+s,a()):[l,s]},n.rangeRound=function(t){return[l,s]=t,l=+l,s=+s,f=!0,a()},n.bandwidth=function(){return b},n.step=function(){return g},n.round=function(t){return arguments.length?(f=!!t,a()):f},n.padding=function(t){return arguments.length?(m=Math.min(1,p=+t),a()):m},n.paddingInner=function(t){return arguments.length?(m=Math.min(1,t),a()):m},n.paddingOuter=function(t){return arguments.length?(p=+t,a()):p},n.align=function(t){return arguments.length?(e=Math.max(0,Math.min(1,t)),a()):e},n.copy=function(){return E(u(),[l,s]).round(f).paddingInner(m).paddingOuter(p).align(e)},vt.apply(a(),arguments)}const _t=n=>gt(n[n.length-1]);var U=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(yt);_t(U);function Bt(n,u){let{x:_,y:l,z:s,title:g,marginTop:b=30,marginRight:f=0,marginBottom:m=30,marginLeft:p=40,width:e=640,height:a=400,xDomain:t,xRange:h=[p,e-f],xPadding:r=.1,yType:x=Q,yDomain:d,yRange:v=[a-m,b],zDomain:B,zPadding:L=.05,yFormat:I,yLabel:S="label for the y-axis",colors:N=xt}=u;const w=P(n,_),$=P(n,l),z=P(n,s);t===void 0&&(t=w),d===void 0&&(d=[0,q($)??0]),B===void 0&&(B=z);let i=new W(t),c=new W(B);const tt=Z(w.length).filter(o=>i.has(w[o])&&c.has(z[o])),T=E(i,h).paddingInner(r),V=E(c,[0,T.bandwidth()]).padding(L),k=x(d,v).nice(),j=Y(B,N),at=J(T).tickSizeOuter(0),et=K(k).ticks(a/60,I);let M;const F=k.tickFormat(100,I);if(g===void 0)M=(o,y,C,O)=>`
            ${y}
            <br />
            ${O}
            <br />
            ${F(Number(C))}
        `;else{const o=g;M=(y,C,O,lt)=>o(y,C,F(Number(O)),lt)}const A=wt("svg").attr("width",e).attr("height",a).attr("viewBox",[0,0,e,a]).attr("style","max-width: 100%; height: auto; height: intrinsic;").attr("color","#fff");let nt=A.append("g").attr("transform",`translate(${p},0)`),rt=o=>o.selectAll(".tick line").clone().attr("x2",e-p-f).attr("stroke-opacity",.1),ot=o=>o.append("text").attr("x",-p).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(S);nt.call(et).call(o=>o.select(".domain").remove()).call(rt).call(ot);const R=X().attr("class","d3_tip").offset([-10,0]).html((o,y)=>M(n[y],w[y],$[y],z[y]));return A.call(R),A.append("g").selectAll("rect").data(tt).join("rect").attr("x",o=>(T(w[o])??0)+(V(z[o])??0)).attr("y",o=>k($[o])).attr("width",V.bandwidth()).attr("height",o=>k(0)-k($[o])).attr("fill",o=>j(z[o])).on("mouseover",R.show).on("mouseleave",R.hide),A.append("g").attr("transform",`translate(0,${a-m})`).call(at),Object.assign(A.node(),{scales:{color:j}})}const zt=ut("div",{class:"chart_box"},null,-1),Pt=it({__name:"Bar",setup(n){let u=D(!0),_=D(!1),l=D([]),s=async()=>{u.value=!0;let e=await new Promise(a=>{a(G(()=>import("./Bar-0429243e.js"),[]))}).then(a=>a.default).catch(a=>{console.log(a),_.value=!0});u.value=!1,e&&(l.value=e)},g=async()=>{if(await s(),!l.value)return;const{innerWidth:e,innerHeight:a}=window,t={top:40,right:20,bottom:20,left:60},h=20,r=pt(".chart_box").append("svg").attr("viewBox",[0,0,e,a]).attr("color","#fff"),x=X().attr("class","d3_tip").offset([-10,0]).html((i,c)=>`<span class="d3_tip-name">${c.name??"没有名字"}: ${c.value}</span>`);r.call(x);let d=E().domain(l.value.map(i=>`${i.name}`)).range([t.left,e-t.right]).padding(.1),v=Q().domain([0,q(l.value,i=>i.value)??0]).nice().range([a-t.bottom-h,t.top]),B=i=>i.attr("transform",`translate(0, ${a-t.bottom-h})`).attr("class","x-axis").call(J(d).tickSizeOuter(0)).call(c=>c.append("text").attr("x",e-120).attr("y",16+h).attr("fill","currentColor").attr("text-anchor","start").attr("font-size","16px").text("→ x轴说明文字")),L=i=>i.attr("transform",`translate(${t.left}, 0)`).attr("class","y-axis").call(K(v)).call(c=>c.select(".domain").remove()).call(c=>c.append("text").attr("x",-t.left/2).attr("y",t.top/2).attr("fill","currentColor").attr("text-anchor","start").attr("font-size","16px").text("↑ y轴说明文字")),I=r.append("g").attr("class","bars").selectAll("rect").data(l.value).join("rect").attr("x",i=>d(`${i.name}`)??0).attr("y",i=>v(i.value)).attr("height",i=>v(0)-v(i.value)).attr("width",d.bandwidth()).attr("fill","#aca").on("mouseover",x.show).on("mouseleave",x.hide),S=r.append("g");S.call(B),r.append("g").call(L);const w=[[t.left,t.top],[e-t.right,a-t.top]];function $(i){d.range([t.left,e-t.right].map(c=>i.transform.applyX(c))),I.attr("x",c=>d(`${c.name}`)??0).attr("width",d.bandwidth()),S.call(B)}let z=bt().scaleExtent([1,8]).translateExtent(w).extent(w).on("zoom",$);r.call(z)},b=D([]),f=D([]),m=async()=>{u.value=!0;let e=await new Promise(a=>{a(G(()=>import("./GroupBar-f0ba908a.js"),[]))}).then(a=>a.default).catch(a=>{console.log(a),_.value=!0});u.value=!1,e&&(b.value=e.data,f.value=e.age)},p=async()=>{if(await m(),!b.value||!f.value)return;const{innerWidth:e,innerHeight:a}=window,t={top:40,right:20,bottom:20,left:60};let h=Bt(b.value,{x:r=>r.year,y:r=>r.value,z:r=>r.age,yLabel:"↑ 不知道什么数",zDomain:f.value,colors:U[f.value.length],marginBottom:t.bottom,marginLeft:t.left,marginRight:t.right,marginTop:t.top,width:e,height:a,title:(r,x,d,v)=>`<span class="d3_tip-name">${x}年，年龄${v}的人有${d}</span>`});document.getElementsByClassName("chart_box")[0].appendChild(h)};return st(async()=>{await dt(),g(),p()}),(e,a)=>{const t=ht;return mt(),ct(t,{loading:H(u),loadError:H(_)},{default:ft(()=>[zt]),_:1},8,["loading","loadError"])}}});export{Pt as default};
